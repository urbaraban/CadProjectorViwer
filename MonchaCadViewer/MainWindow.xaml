<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MonchaCadViewer"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:Properties="clr-namespace:MonchaCadViewer.Properties" xmlns:controlzex="urn:controlzex" x:Name="MainWindow1" x:Class="MonchaCadViewer.MainWindow"
        mc:Ignorable="d"
        Title="LaserCat – Viwer" Focusable="False" ResizeMode="CanResizeWithGrip" SizeToContent="Manual" KeyboardNavigation.TabNavigation="None"  AllowDrop="True" Height="688.898" Width="947" Closing="Window_Closing" Closed="Window_Closed" controlzex:KeyboardNavigationEx.AlwaysShowFocusVisual="True" WindowStartupLocation="CenterScreen" Icon="logo-01.png" KeyUp="MainWindow1_KeyUp" TextInput="MainWindow1_TextInput" PreviewKeyDown="MainWindow1_PreviewKeyDown">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>

                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Themes/Light.Blue.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="Border" TargetType="{x:Type Border}">
                <Setter Property="BorderBrush" Value="DarkGray"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="BorderBrush" Value="CadetBlue"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="ObjCanvas" TargetType="{x:Type Border}">
                <Setter Property="BorderBrush" Value="DarkGray"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="BorderBrush" Value="CadetBlue"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="50"/>
            <RowDefinition/>
            <RowDefinition Height="88"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition/>
            <ColumnDefinition Width="250"/>
        </Grid.ColumnDefinitions>
        <Menu x:Name="menu" HorizontalAlignment="Stretch" Width="Auto" VerticalContentAlignment="Center" Padding="4,2,0,0" Grid.ColumnSpan="3" Margin="0,1,0,0">
            <MenuItem Header="Файл">
                <MenuItem x:Name="menuConnect" Header="Подключить" />
                <Separator/>
                <MenuItem x:Name="Menu_NewFile" Header="Создать" />
                <MenuItem x:Name="Menu_OpenFile" Header="Открыть" Click="OpenBtn_Click"/>
                <Separator/>
                <MenuItem Header="Сохранить"/>
                <Separator/>
                <MenuItem Header="Закрыть компас"/>
                <MenuItem Header="Выход" />
            </MenuItem>
            <MenuItem Header="Папки">
                <MenuItem x:Name="WorkFolder" Header="Рабочая папка" />
            </MenuItem>

        </Menu>
        <Controls:ToggleSwitch x:Name="MultiToggle"  Content="Multi" HorizontalAlignment="Left" Margin="5,4,0,0" VerticalAlignment="Top" IsOn="{Binding int_multi, Mode=TwoWay}" Grid.Row="2" RenderTransformOrigin="0.5,0.5" Grid.Column="2" Toggled="MultiToggle_Toggled" HorizontalContentAlignment="Center" Height="26" Width="95">
            <Controls:ToggleSwitch.DataContext>
                <Properties:Settings/>
            </Controls:ToggleSwitch.DataContext>
        </Controls:ToggleSwitch>
        <Border x:Name="CanvasBorder" Style="{StaticResource Border}" Background="LightGray" Grid.Column="1" Grid.Row="2" Margin="0,0,0,20">
            <Viewbox x:Name="MainViewBox" ClipToBounds="True" StretchDirection="DownOnly"  Stretch="Uniform"  Margin="0,0,0,0" ForceCursor="True" KeyboardNavigation.TabNavigation="Once" DragEnter="MainViewBox_DragEnter" Drop="MainViewBox_Drop">
                <Viewbox.DataContext>
                    <Properties:Settings/>
                </Viewbox.DataContext>
                <Border x:Name="CanvasBoxBorder" Background="White"  Style="{StaticResource Border}" Grid.Column="1" Grid.Row="2" Margin="3" >
                    <Viewbox  x:Name="CanvasBox"  Stretch="Uniform" StretchDirection="DownOnly">
                    </Viewbox>
                </Border>
            </Viewbox>
        </Border>

        <StackPanel Width="463" HorizontalAlignment="Right" Orientation="Horizontal" Grid.Column="1" Grid.Row="4">
            <Label x:Name="Progressinfo" Content="Info" Width="306" HorizontalAlignment="Right"/>
            <ProgressBar x:Name="PgBar" Margin="3" Width="148"/>
        </StackPanel>

        <TabControl x:Name="tabControl" Margin="5,38,5,1" Grid.Column="2" Grid.Row="2" Grid.RowSpan="2">
            <TabItem x:Name="ContourSettingTab" Header="Output" Controls:HeaderedControlHelper.HeaderFontSize="18">
                <Grid Background="#FFE5E5E5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="39"/>
                        <ColumnDefinition Width="77"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Slider x:Name="AngleWaitSlider" Height="30" Margin="6,338,10,0" VerticalAlignment="Top" Value="1" Minimum="1" ValueChanged="StartWaitSlider_ValueChanged" SmallChange="1" Grid.Column="1" Grid.ColumnSpan="2" Maximum="30">

                    </Slider>
                    <Controls:NumericUpDown x:Name="RedUpDn" Margin="0,79,10,0" Value="255" Maximum="255" Minimum="1" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged" Grid.Column="2"/>
                    <Label x:Name="StartWaitLabel" Content="{Binding Value, ElementName=AngleWaitSlider}" Margin="10,338,0,0" VerticalAlignment="Top" Height="26"/>
                    <Label x:Name="StartWaitLabel_Copy" Margin="34,330,0,0" VerticalAlignment="Top" Content="Время ожидания угла" FontSize="8" HorizontalAlignment="Left" Grid.Column="1" Height="21" Width="90" Grid.ColumnSpan="2"/>
                    <Slider x:Name="ScanRateCalc" Margin="10,50,10,0" VerticalAlignment="Top" Value="20000" Minimum="1000" Maximum="40000" SmallChange="1" AllowDrop="False" ValueChanged="ScanRateCalc_ValueChanged" PreviewMouseDown="ScanRateRealSlider_PreviewMouseDown" Grid.ColumnSpan="3" Height="24"/>
                    <Label x:Name="ScanRateLabel" Margin="32,34,0,0" VerticalAlignment="Top" Content="ScanRateCalc:" FontSize="8" HorizontalAlignment="Left" Grid.Column="1" Height="21" Width="58" Grid.ColumnSpan="2"/>
                    <Label x:Name="ScanRateCalcLabel" Margin="23,36,21,0" VerticalAlignment="Top" FontSize="8" Height="19" Grid.Column="2"/>
                    <Controls:ToggleSwitch x:Name="RedToggle" Background="Red"  Content="Red" HorizontalAlignment="Left" Margin="10,79,0,0" VerticalAlignment="Top" IsOn="True" Width="101" Toggled="ColorToggle_Toggled" Grid.ColumnSpan="2" Height="29"/>
                    <Controls:NumericUpDown x:Name="GreenUpDn" Margin="0,116,10,0" Value="255" Maximum="255" Minimum="1" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged" Grid.Column="2"/>
                    <Controls:ToggleSwitch x:Name="GreenToggle"  Content="Green" HorizontalAlignment="Left" Margin="10,116,0,0" VerticalAlignment="Top" Width="101" Toggled="ColorToggle_Toggled" Grid.ColumnSpan="2" Height="26"/>
                    <Controls:NumericUpDown x:Name="BlueUpDn" Margin="0,153,10,0" Value="255" Maximum="255" Minimum="1" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged" Grid.Column="2"/>
                    <Controls:ToggleSwitch x:Name="BlueToggle"  Content="Blue" HorizontalAlignment="Left" Margin="10,153,0,0" VerticalAlignment="Top" Width="101" Toggled="ColorToggle_Toggled" Grid.ColumnSpan="2" Height="26"/>
                    <Slider x:Name="AlphaSlider" Margin="10,201,10,0" VerticalAlignment="Top" Value="255" ValueChanged="AlphaSlider_ValueChanged" Maximum="255" Minimum="1" Grid.ColumnSpan="3" Height="21"/>
                    <Label x:Name="ScanRateLabel_Copy" Margin="0,187,0,0" VerticalAlignment="Top" Content="Яркость" FontSize="8" HorizontalAlignment="Center" Grid.Column="0" Height="21" Width="55" Grid.ColumnSpan="3" HorizontalContentAlignment="Center"/>
                    <Controls:NumericUpDown x:Name="FPSUpDn" Margin="0,231,10,0" Value="30" Maximum="40" Minimum="14.2" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged" Grid.Column="2"/>
                    <Label x:Name="FPSLabel" Content="FPS" HorizontalAlignment="Left" Height="26" Margin="10,231,0,0" VerticalAlignment="Top" Width="99" RenderTransformOrigin="0.5,0.5" AutomationProperties.HelpText="Кадров в секунду" HorizontalContentAlignment="Center" Grid.ColumnSpan="2">
                        <Label.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform/>
                                <SkewTransform/>
                                <RotateTransform Angle="0.155"/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </Label.RenderTransform>
                    </Label>
                    <Slider x:Name="ScanRateRealSlider" Margin="10,18,10,0" VerticalAlignment="Top" Value="20000" Minimum="1000" Maximum="40000" SmallChange="1" AllowDrop="False" ValueChanged="ScanRateSlider_ValueChanged" PreviewMouseDown="ScanRateRealSlider_PreviewMouseDown" Grid.ColumnSpan="3" Height="16"/>
                    <Label x:Name="ScanRateLabel_Copy1" Margin="32,4,0,0" VerticalAlignment="Top" Content="ScanRateReal:" FontSize="8" HorizontalAlignment="Left" HorizontalContentAlignment="Right" Grid.Column="1" Height="21" Width="58" Grid.ColumnSpan="2"/>
                    <Label x:Name="ScanRateRealLabel" Margin="23,4,21,0" VerticalAlignment="Top" FontSize="8" Height="21" Grid.Column="2"/>
                    <ToggleButton x:Name="ScanRateAnchor" Content="🔗" HorizontalAlignment="Left" Margin="10,30,0,0" VerticalAlignment="Top" Height="25" Width="25" Padding="1,1,1,1" IsChecked="{Binding int_scan_anchor, Mode=TwoWay}" Click="ScanRateAnchor_Click">
                        <ToggleButton.DataContext>
                            <Properties:Settings/>
                        </ToggleButton.DataContext>
                    </ToggleButton>
                    <Slider x:Name="StartBlankSlider" Height="30" Margin="6,371,10,0" VerticalAlignment="Top" Value="1" Minimum="1" ValueChanged="StartWaitSlider_ValueChanged" SmallChange="1" Grid.Column="1" Grid.ColumnSpan="2" Maximum="29">

                    </Slider>
                    <Label x:Name="StartWaitLabel_Copy1" Content="{Binding Value, ElementName=StartBlankSlider}" Margin="10,372,0,0" VerticalAlignment="Top" Height="26"/>
                    <Slider x:Name="EndBlankSlider" Height="30" Margin="6,402,10,0" VerticalAlignment="Top" Value="1" Minimum="1" ValueChanged="StartWaitSlider_ValueChanged" SmallChange="1" Grid.Column="1" Grid.ColumnSpan="2" Maximum="30">

                    </Slider>
                    <Label x:Name="StartWaitLabel_Copy2" Content="{Binding Value, ElementName=EndBlankSlider}" Margin="10,403,0,0" VerticalAlignment="Top" Height="26"/>
                    <Label x:Name="StartWaitLabel_Copy3" Margin="34,363,0,0" VerticalAlignment="Top" Content="Время ожидания начала Blank" FontSize="8" HorizontalAlignment="Left" Grid.Column="1" Height="21" Width="120" Grid.ColumnSpan="2"/>
                    <Label x:Name="StartWaitLabel_Copy4" Margin="34,396,0,0" VerticalAlignment="Top" Content="Время ожидания окончания Blank" FontSize="8" HorizontalAlignment="Left" Width="148" Grid.Column="1" Height="21" Grid.ColumnSpan="2"/>
                    <Slider x:Name="ColorShiftSlider" Height="30" Margin="6,307,10,0" VerticalAlignment="Top" Value="1" Minimum="1" ValueChanged="StartWaitSlider_ValueChanged" SmallChange="1" Grid.Column="1" Grid.ColumnSpan="2" Maximum="30"/>
                    <Label x:Name="StartWaitLabel_Copy5" Margin="34,299,0,0" VerticalAlignment="Top" Content="Затухание" FontSize="8" HorizontalAlignment="Left" Grid.Column="1" Height="21" Width="46" Grid.ColumnSpan="2"/>
                    <Label x:Name="StartWaitLabel_Copy6" Content="{Binding Value, ElementName=ColorShiftSlider}" Margin="10,308,0,0" VerticalAlignment="Top" Height="26"/>

                </Grid>
            </TabItem>
            <TabItem Header="Format" Controls:HeaderedControlHelper.HeaderFontSize="18">
                <Grid Background="#FFE5E5E5">
                    <TabControl x:Name="TabItem">
                        <TabItem Header="Компас" Controls:HeaderedControlHelper.HeaderFontSize="14">
                            <Grid Background="#FFE5E5E5">
                                <Button x:Name="kmpsSelectBtn" Content="Select" HorizontalAlignment="Left" Margin="10,86,0,0" VerticalAlignment="Top" Width="125" Height="50" Click="kmpsSelectBtn_Click"/>
                                <Button x:Name="kmpsAddBtn" Content="Add in..." HorizontalAlignment="Left" Margin="140,86,0,0" VerticalAlignment="Top" Width="78" Height="50" Click="kmpsAddBtn_Click"/>
                                <Controls:ToggleSwitch x:Name="kmpsConnectToggle"  Content="Connect" HorizontalAlignment="Left" Margin="17,17,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5" Toggled="kmpsConnectToggle_Toggled" HorizontalContentAlignment="Center" Height="38" Width="201">
                                    <Controls:ToggleSwitch.DataContext>
                                        <Properties:Settings/>
                                    </Controls:ToggleSwitch.DataContext>
                                </Controls:ToggleSwitch>
                                <Controls:NumericUpDown x:Name="CRSUpDnKMPS" Margin="10,146,93,0" Value="{Binding cl_crs, Mode=TwoWay}" Maximum="99" Minimum="3" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged">
                                    <Controls:NumericUpDown.DataContext>
                                        <Properties:Settings/>
                                    </Controls:NumericUpDown.DataContext>
                                </Controls:NumericUpDown>
                                <Label x:Name="CRSLabel_Copy" Content="CRS(mm)" HorizontalAlignment="Left" Height="26" Margin="141,147,0,0" VerticalAlignment="Top" Width="77" RenderTransformOrigin="0.5,0.5" AutomationProperties.HelpText="Шаг точки для кривой" HorizontalContentAlignment="Center">

                                </Label>
                                <Label x:Name="KmpsNameLbl" Content="Пусто" HorizontalAlignment="Left" Margin="10,55,0,0" VerticalAlignment="Top" Width="208"/>
                            </Grid>
                        </TabItem>
                        <TabItem Header="DXF" Controls:HeaderedControlHelper.HeaderFontSize="14">
                            <Grid Background="#FFE5E5E5"/>
                        </TabItem>
                        <TabItem Header="SVG" Controls:HeaderedControlHelper.HeaderFontSize="14">
                            <Grid Background="#FFE5E5E5">
                                <TextBox x:Name="svgSeparatorBox1" HorizontalAlignment="Left" Height="23" Margin="114,59,0,0" TextWrapping="Wrap" Text="{Binding svg_separator1, Mode=TwoWay}" VerticalAlignment="Top" Width="104" TextChanged="stlSeparatorBox_TextChanged">
                                    <TextBox.DataContext>
                                        <Properties:Settings/>
                                    </TextBox.DataContext>
                                </TextBox>
                                <Label x:Name="label1" Content="Разделитель 1" HorizontalAlignment="Left" Margin="10,59,0,0" VerticalAlignment="Top" Width="99"/>
                                <TextBox x:Name="svgSeparatorBox2" HorizontalAlignment="Left" Height="23" Margin="114,90,0,0" TextWrapping="Wrap" Text="{Binding svg_separator2, Mode=TwoWay}" VerticalAlignment="Top" Width="104" TextChanged="stlSeparatorBox_TextChanged">
                                    <TextBox.DataContext>
                                        <Properties:Settings/>
                                    </TextBox.DataContext>
                                </TextBox>
                                <Label x:Name="label1_Copy" Content="Разделитель 2" HorizontalAlignment="Left" Margin="10,90,0,0" VerticalAlignment="Top" Width="99"/>
                                <ComboBox x:Name="svg_settingcombo" HorizontalAlignment="Left" Margin="16,26,0,0" VerticalAlignment="Top" Width="138"/>
                                <Label x:Name="svg_label_setting" Content="Сохраненные настройки" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Top" Width="208"/>
                                <Button x:Name="button1" Content="–" Margin="0,26,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="27"/>
                                <Button x:Name="button1_Copy" Content="+" Margin="0,26,42,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="27"/>
                            </Grid>
                        </TabItem>
                        <TabItem Header="STL" Controls:HeaderedControlHelper.HeaderFontSize="14">
                            <Grid Background="#FFE5E5E5"/>
                        </TabItem>
                        <TabItem Header="QR" Controls:HeaderedControlHelper.HeaderFontSize="14">
                            <Grid Background="#FFE5E5E5">
                                <Controls:ToggleSwitch x:Name="QrToggler" Margin="10,74,0,312" OffContent="QRCode: FileName" OnContent="QRCode: FilePath" ContentDirection="RightToLeft" IsOn="{Binding save_qr_path, Mode=TwoWay}" Toggled="QrToggler_Toggled">
                                    <Controls:ToggleSwitch.DataContext>
                                        <Properties:Settings/>
                                    </Controls:ToggleSwitch.DataContext>

                                </Controls:ToggleSwitch>
                                <TextBox x:Name="BasePathBox" Height="23" TextWrapping="Wrap" Text="{Binding save_base_folder, Mode=TwoWay}" Margin="10,12,109,0" VerticalAlignment="Top">
                                    <TextBox.DataContext>
                                        <Properties:Settings/>
                                    </TextBox.DataContext>
                                </TextBox>
                                <TextBox x:Name="AlreadyPathBox" Height="23" TextWrapping="Wrap" Text="{Binding save_work_folder, Mode=TwoWay}" Margin="10,43,109,0" VerticalAlignment="Top">
                                    <TextBox.DataContext>
                                        <Properties:Settings/>
                                    </TextBox.DataContext>
                                </TextBox>
                                <Button x:Name="BaseFolderSelect" Content="Browse..." HorizontalAlignment="Left" Margin="124,12,0,0" VerticalAlignment="Top" Width="94" Height="26" Click="BaseFolderSelect_Click"/>
                                <Button x:Name="WorkFolderSelect" Content="Browse..." HorizontalAlignment="Left" Margin="124,43,0,0" VerticalAlignment="Top" Width="94" Height="26" Click="WorkFolderSelect_Click"/>
                            </Grid>
                        </TabItem>
                    </TabControl>

                </Grid>
            </TabItem>
            <TabItem x:Name="Calibration" Header="Calibration" Controls:HeaderedControlHelper.HeaderFontSize="18">
                <Grid Background="#FFE5E5E5">
                    <TextBox x:Name="MonchaPathBox" HorizontalAlignment="Left" Height="23" Margin="10,28,0,0" TextWrapping="Wrap" Text="{Binding cl_moncha_path}" VerticalAlignment="Top" Width="131">
                        <TextBox.DataContext>
                            <Properties:Settings/>
                        </TextBox.DataContext>
                    </TextBox>
                    <Button x:Name="BrowseMonchaBtn" Content="Browse..." Margin="146,27,7,0" VerticalAlignment="Top" Click="BrowseMonchaBtn_Click"/>
                    <Label x:Name="label" Content="Путь до файла Moncha (*.mws)" HorizontalAlignment="Left" Margin="10,2,0,0" VerticalAlignment="Top"/>
                    <Controls:NumericUpDown x:Name="WidthUpDn" Margin="89,62,10,0" Value="{Binding cl_width, Mode=TwoWay}" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged">
                        <Controls:NumericUpDown.DataContext>
                            <Properties:Settings/>
                        </Controls:NumericUpDown.DataContext>
                    </Controls:NumericUpDown>
                    <Label x:Name="label_Copy" Content="Ширина" HorizontalAlignment="Left" Margin="10,62,0,0" VerticalAlignment="Top" Width="74"/>
                    <Controls:NumericUpDown x:Name="HeightUpD" Margin="89,93,10,0" Value="{Binding cl_height, Mode=TwoWay}" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged">
                        <Controls:NumericUpDown.DataContext>
                            <Properties:Settings/>
                        </Controls:NumericUpDown.DataContext>
                    </Controls:NumericUpDown>
                    <Label x:Name="label_Copy1" Content="Высота" HorizontalAlignment="Left" Margin="10,93,0,0" VerticalAlignment="Top" Width="74"/>
                    <Controls:NumericUpDown x:Name="DeepUpDn" Margin="89,124,10,0" Value="{Binding cl_deep, Mode=TwoWay}" Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged">
                        <Controls:NumericUpDown.DataContext>
                            <Properties:Settings/>
                        </Controls:NumericUpDown.DataContext>
                    </Controls:NumericUpDown>
                    <Label x:Name="label_Copy2" Content="Глубина" HorizontalAlignment="Left" Margin="10,124,0,0" VerticalAlignment="Top" Width="74"/>
                    <Button x:Name="SaveSizeBtn" Content="Save size" HorizontalAlignment="Left" Margin="124,272,0,0" VerticalAlignment="Top" Width="100" Height="30" Controls:ControlsHelper.ContentCharacterCasing="Normal"/>

                    <Button x:Name="SaveMeshBtn" Content="Calc" Height="30" Margin="124,308,10,0" VerticalAlignment="Top" Click="SaveMeshBtn_Click" IsEnabled="{Binding IsOn, ElementName=EditMeshToggle}"/>

                    <Controls:ToggleSwitch x:Name="EditMeshToggle" Content="Edit" HorizontalAlignment="Right" Margin="0,272,129,0" VerticalAlignment="Top" Width="90"/>
                    <Controls:NumericUpDown x:Name="MashMultiplierUpDn" Margin="89,158,10,0" Value="{Binding cl_mash_multiplier, Mode=TwoWay}" Background="White" Height="26" Maximum="1000" Minimum="1" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged" Speedup="False" Controls:ScrollViewerHelper.IsHorizontalScrollWheelEnabled="True" ValueIncremented="MashMultiplierUpDn_ValueIncremented" ValueDecremented="MashMultiplierUpDn_ValueDecremented">
                        <Controls:NumericUpDown.DataContext>
                            <Properties:Settings/>
                        </Controls:NumericUpDown.DataContext>
                    </Controls:NumericUpDown>
                    <Label x:Name="label_Copy3" Content="Множитель" HorizontalAlignment="Left" Margin="10,158,0,0" VerticalAlignment="Top"/>
                    <Controls:ToggleSwitch x:Name="MorphToggle" Content="Morph" HorizontalAlignment="Right" Margin="0,308,110,0" VerticalAlignment="Top" Width="109" IsOn="True" IsEnabled="{Binding IsOn, ElementName=EditMeshToggle}" Toggled="MorphToggle_Toggled"/>
                    <Controls:ToggleSwitch x:Name="HorizontalToggle" Content="Horizontal" HorizontalAlignment="Right" Margin="0,346,87,0" VerticalAlignment="Top" Width="132" IsEnabled="{Binding IsOn, ElementName=EditMeshToggle}" Toggled="HorizontalToggle_Toggled"/>
                    <Controls:ToggleSwitch x:Name="InvertXtoggle" Content="Invert X" HorizontalAlignment="Right" Margin="0,195,118,0" VerticalAlignment="Top" Width="108" HorizontalContentAlignment="Right" FlowDirection="RightToLeft" Toggled="ColorToggle_Toggled" Controls:HeaderedControlHelper.HeaderFontSize="12" FontSize="12"/>
                    <Controls:ToggleSwitch x:Name="InvertYtoggle" Content="Invert Y" HorizontalAlignment="Right" Margin="0,195,7,0" VerticalAlignment="Top" Width="110" HorizontalContentAlignment="Right" FlowDirection="RightToLeft" Toggled="ColorToggle_Toggled" FontSize="12"/>
                    <Controls:NumericUpDown x:Name="PointStepUpDn" Margin="90,383,9,0"  Background="White" Height="26" VerticalAlignment="Top" ValueChanged="SplitLineUpDn_ValueChanged" NumericInputMode="Decimal" Value="0.0001">
                        <Controls:NumericUpDown.DataContext>
                            <Properties:Settings/>
                        </Controls:NumericUpDown.DataContext>
                    </Controls:NumericUpDown>
                    <Label x:Name="label_Copy4" Content="Шаг" HorizontalAlignment="Left" Margin="15,383,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="ClearCalcMeshBtn" Content="DellCalc" Height="30" Margin="146,346,10,0" VerticalAlignment="Top" IsEnabled="{Binding IsOn, ElementName=EditMeshToggle}" Click="ClearCalcMeshBtn_Click"/>

                </Grid>
            </TabItem>
            <TabItem Header="Log" Controls:HeaderedControlHelper.HeaderFontSize="18">
                <Grid>
                    <ListBox x:Name="LogBox"/>

                </Grid>
            </TabItem>
        </TabControl>
        <Button x:Name="PlayBtn" Content="Play" Grid.Column="2" Margin="5,5,55,5" Click="PlayBtn_Click" Background="#FFFFD100" Grid.Row="1"/>
        <Border Grid.Row="2" Style="{StaticResource Border}" Margin="5,0,5,4" Grid.RowSpan="2">
            <TreeView x:Name="treeView" Grid.Row="1" Margin="2" KeyboardNavigation.DirectionalNavigation="None" KeyboardNavigation.TabNavigation="None">
                <StackPanel x:Name="TreeHead" Orientation="Horizontal" Width="Auto" Margin="-21,0,6,0">
                    <TextBlock Margin="5,0,5,0" VerticalAlignment="Center" Height="20"><Run Text="Component"/></TextBlock>
                    <Button x:Name="RefreshLaser" FontFamily="Segoe MDL2 Assets" Content="&#xEDAB;" Height="26" Margin="0,0,5,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="25" Background="{x:Null}" BorderBrush="{x:Null}" Click="RefreshLaser_Click_1"/>

                </StackPanel>

                <TreeViewItem x:Name="DeviceTree" Header="Devices" VerticalContentAlignment="Center">
                    <TreeViewItem x:Name="MeshTree" Header="Mesh"/>
                </TreeViewItem>
                <TreeViewItem x:Name="FrameTree" Header="Frames" DisplayMemberPath="Uid" AllowDrop="False" Width="188"/>






            </TreeView>
        </Border>

        <Button x:Name="OpenBtn" AllowDrop="True" Content="Open" Margin="51,5" Grid.Row="1" DragEnter="OpenBtn_DragEnter" DragOver="OpenBtn_DragOver" DragLeave="OpenBtn_DragLeave" Drop="OpenBtn_DragDrop" Click="OpenBtn_Click"/>
        <Button x:Name="ReloadBtn" Content="Refresh" Margin="0,5,6,5" Grid.Row="1" HorizontalAlignment="Right" Width="41" Click="ReloadBtn_Click"/>
        <Border Style="{StaticResource Border}" Grid.Column="1" Margin="0,5,0,4" Grid.Row="3">
            <StackPanel x:Name="FrameStack" Orientation="Horizontal" HorizontalAlignment="Left" CanHorizontallyScroll="True">
                <Viewbox>
                    <Canvas/>
                </Viewbox>
            </StackPanel>
        </Border>
        <DockPanel Grid.Column="1" LastChildFill="False" Grid.Row="1" Margin="0,5,115,5">
            <Button x:Name="LineBtn" Content="Line" Height="40" VerticalAlignment="Top" Width="40" Click="LineBtn_Click"/>
            <Button x:Name="ClearBtn" Content="Button" Height="40" VerticalAlignment="Top" Width="74" Click="ClearBtn_Click"/>
        </DockPanel>
        <ComboBox x:Name="DeviceCombo" Grid.Column="2" Margin="105,4,10,0" Grid.Row="2" VerticalAlignment="Top" IsEnabled="{Binding IsOn, ElementName=MultiToggle}" DataContextChanged="DeviceCombo_DataContextChanged" Height="26" SelectionChanged="DeviceCombo_SelectionChanged"/>
        <Button x:Name="RefreshFrameBtn" Content="Button" Grid.Column="2" Margin="0,5,10,5" Grid.Row="1" HorizontalAlignment="Right" Width="40" Click="RefreshFrameBtn_Click"/>
        <Controls:ToggleSwitch x:Name="RealTimeToggle"  Content="Realtime " HorizontalAlignment="Right" Margin="0,14,10,16" VerticalAlignment="Stretch" IsOn="{Binding int_realtime, Mode=TwoWay}" Grid.Row="1" RenderTransformOrigin="0.5,0.5" Grid.Column="1" Toggled="RealTimeToggle_Toggled" HorizontalContentAlignment="Right" Width="106" FlowDirection="RightToLeft" Padding="1,0,0,0">
            <Controls:ToggleSwitch.DataContext>
                <Properties:Settings/>
            </Controls:ToggleSwitch.DataContext>
        </Controls:ToggleSwitch>
        <ToggleButton x:Name="QRBtn" Content="QR" Margin="5,5,0,5" Grid.Row="1" Click="QRBtn_Click" HorizontalAlignment="Left" Width="41" Focusable="False"/>



    </Grid>
</Window>
